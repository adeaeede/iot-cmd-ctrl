<div ng-if="ctrl.template == 'home'">
    <h3 class="page-heading">Command & Control</h3>
    <div class="gf-form gf-form--grow">
        <div class="gf-form max-width-30">
            <span class="gf-form-label width-10">Message</span>
            <input class="gf-form-input ng-pristine ng-untouched ng-valid ng-not-empty"
                   type="text" ng-model="msg" placeholder="Type your message here">
        </div>
        <a class="btn btn-success" ng-click="ctrl.sendMessage(msg)"><span>Send</span></a>

    </div>
    <div class="gf-form gf-form--grow">
        <div class="gf-form max-width-30">
            <span class="gf-form-label width-10">Response status</span>
            <p ng-pristine ng-untouched>{{ ctrl.currentState.messageStatus }}</p>
        </div>

    </div>
    <div class="gf-form-group" ng-if="!ctrl.currentState.isConnected && ctrl.currentState.isInitialized">
        <div class="alert-error alert">
            <div class="alert-icon"><i class="fa fa-exclamation-triangle"></i></div>
            <div class="alert-body">
                <div class="alert-title">Error: {{ ctrl.response }}</div>
            </div>
        </div>
    </div>
</div>

    <div ng-if="ctrl.template == 'settings'">
        <div class="gf-form-group">
            <h3 class="page-heading">Credentials</h3>
            <div class="gf-form-group">
                <div class="gf-form max-width-30">
                    <span class="gf-form-label width-10">Username</span>
                    <input class="gf-form-input ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-required ng-valid-pattern"
                           type="text" ng-model="username" placeholder="TENANT\username">
                </div>
                <div class="gf-form max-width-30">
                    <span class="gf-form-label width-10">Password</span>
                    <input class="gf-form-input ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-required ng-valid-pattern"
                           type="text" ng-model="password" placeholder="Password">
                </div>
                <div class="gf-form max-width-30">
                    <span class="gf-form-label width-10">Things API Token:</span>
                    <input class="gf-form-input ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-required ng-valid-pattern"
                           type="text" ng-model="apitoken" placeholder="API Token">
                </div>
                <div class="gf-form max-width-30">
                    <span class="gf-form-label width-10">Thing ID:</span>
                    <input class="gf-form-input ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-required ng-valid-pattern"
                           type="text" ng-model="thingid" placeholder="namespace:thingid">
                </div>
                <div class="gf-form-inline">
                    <div class="gf-form max-width-30">
                        <span class="gf-form-label width-10">Server</span>
                        <div class="gf-form-select-wrapper max-width-24">
                            <select class="gf-form-input ng-pristine ng-valid ng-not-empty ng-touched"
                                    ng-init="server='AWS'" ng-model="server">
                                <option label="AWS (EU-1)" value="AWS" selected="selected">AWS (EU-1)</option>
                                <option label="Bosch IoT Cloud (EU-2)" value="BIC">Bosch IoT Cloud (EU-2)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="ctrl.currentState.isStored" class="gf-form-group section">
                <h5 ng-show="ctrl.currentState.isTesting" class="ng-hide">Testing.... <i
                        class="fa fa-spiner fa-spin"></i></h5>
                <div ng-if="ctrl.currentState.isConnected" class="alert alert-success" ng-show="ctrl.response">
                    <div class="alert-icon">
                        <i class="fa fa-check"></i>
                    </div>
                    <div class="alert-body">
                        <div class="alert-title">Credentials stored</div>
                    </div>
                </div>
                <div ng-if="!ctrl.currentState.isConnected" class="alert-error alert">
                    <div class="alert-icon"><i class="fa fa-exclamation-triangle"></i></div>
                    <div class="alert-body">
                        <div class="alert-title">Credentials rejected.</div>
                    </div>
                </div>
            </div>
            <div class="gf-form-button-row">
                <button type="submit" class="btn btn-success" ng-click="ctrl.storeCredentials(username, password,
                                                                    apitoken, thingid, server)">Save
                </button>
                <a class="btn btn-inverse" ng-click="ctrl.switchTemplate()">Back</a>
            </div>
        </div>
    </div>
</div>

<div ng-if="ctrl.template == 'home'" class="settings" style="position: absolute; bottom: 10px">
    <button ng-click="ctrl.switchTemplate()" class="btn navbar-button navbar-button--settings"><i class="fa fa-cog"></i>
    </button>
</div>